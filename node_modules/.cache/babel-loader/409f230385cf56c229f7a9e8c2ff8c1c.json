{"remainingRequest":"C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\src\\pages\\modifyMovie.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\src\\pages\\modifyMovie.vue","mtime":1651936960802},{"path":"C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646917067899},{"path":"C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\babel-loader\\lib\\index.js","mtime":1646917103326},{"path":"C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646917067899},{"path":"C:\\Users\\Sherwin\\Documents\\GitHub\\HERec\\node_modules\\vue-loader\\lib\\index.js","mtime":1646917096669}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"modifyMovie\",\n  props: {\n    mid: {\n      type: Number,\n      default: 0\n    }\n  },\n  data: function data() {\n    return {\n      aList: [],\n      dList: [],\n      movieFrom: {},\n      movieName: '',\n      movieCover: '',\n      movieSlideImg: '',\n      movieBio: '',\n      movieRegion: [],\n      movieTime: '',\n      movieLang: [],\n      movieRelDate: '',\n      actorList: [],\n      directorList: [],\n      typeList: [],\n      fileList: [],\n      slideFile: [],\n      options: [],\n      directOptions: [],\n      list: [],\n      imageUrl: '',\n      slideUrl: '',\n      movieSlide: '',\n      loading: false,\n      movieFromRules: {\n        movieName: [{\n          required: true,\n          message: '请输入电影名',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    getMovieInfo: function getMovieInfo() {\n      var _this = this;\n\n      this.$axios({\n        method: \"get\",\n        url: \"/getMovieByMovieId\",\n        params: {\n          mid: this.mid\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this.movieName = res.data.movieInfo.movieName;\n          _this.movieBio = res.data.movieInfo.movieBio;\n\n          if (res.data.movieInfo.movieLang) {\n            _this.movieLang = res.data.movieInfo.movieLang.replaceAll(' ', '').split('/');\n          }\n\n          if (res.data.movieInfo.movieRegion) {\n            _this.movieRegion = res.data.movieInfo.movieRegion.replaceAll(' ', '').split('/');\n          }\n\n          _this.movieTime = res.data.movieInfo.movieTime;\n          _this.movieRelDate = res.data.movieInfo.movieRelDate;\n          _this.movieCover = res.data.movieInfo.movieImg;\n          _this.movieSlideImg = res.data.movieInfo.movieSlideImg;\n          _this.imageUrl = \"http://127.0.0.1:8000/media/\" + _this.movieCover;\n          _this.slideUrl = \"http://127.0.0.1:8000/media/\" + _this.movieSlideImg;\n          _this.actorList = res.data.actorId;\n          _this.aList = res.data.actor;\n          _this.dList = res.data.director;\n          _this.typeList = res.data.typeId;\n          _this.directorList = res.data.directorId;\n          _this.imgLoad = true;\n        } else {\n          _this.$message.error('无此电影404');\n\n          _this.$router.go(-1);\n        }\n      });\n    },\n    checkId: function checkId() {\n      var _this2 = this;\n\n      var uid = this.$cookie.get('userId');\n      var type = this.$cookie.get('type');\n\n      if (type == 1) {\n        this.$router.go(-1);\n      } else {\n        this.$axios({\n          method: \"get\",\n          url: '/getUserById',\n          params: {\n            userId: uid\n          }\n        }).then(function (res) {\n          if (res.data.result) {\n            if (res.data.type) {\n              _this2.$cookie.remove('userId');\n\n              _this2.$cookie.remove('type');\n\n              _this2.$router.push('/log');\n\n              _this2.$message.error('非管理员用户，请重新登陆');\n            } else {\n              _this2.$message.warning('欢迎登录HERec管理员');\n            }\n          } else {\n            _this2.$cookie.remove('userId');\n\n            _this2.$cookie.remove('type');\n\n            _this2.$router.push('/log');\n\n            _this2.$message.error('非管理员用户，请重新登陆');\n          }\n        });\n      }\n    },\n    getPerson: function getPerson() {\n      var _this3 = this;\n\n      this.$axios({\n        method: \"get\",\n        url: '/getPerson'\n      }).then(function (res) {\n        _this3.list = res.data.personList.map(function (item) {\n          return {\n            value: item[0],\n            label: item[1]\n          };\n        });\n      });\n    },\n    selectActor: function selectActor(query) {\n      var _this4 = this;\n\n      if (query !== '') {\n        this.loading = true;\n        setTimeout(function () {\n          _this4.loading = false;\n          _this4.options = _this4.list.filter(function (item) {\n            return item.label.toLowerCase().indexOf(query.toLowerCase()) > -1;\n          });\n        }, 200);\n      } else {\n        this.options = [];\n      }\n    },\n    selectDirector: function selectDirector(query) {\n      var _this5 = this;\n\n      if (query !== '') {\n        this.loading = true;\n        setTimeout(function () {\n          _this5.loading = false;\n          _this5.directOptions = _this5.list.filter(function (item) {\n            return item.label.toLowerCase().indexOf(query.toLowerCase()) > -1;\n          });\n        }, 200);\n      } else {\n        this.directOptions = [];\n      }\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var types = ['image/jpeg', 'image/jpg', 'image/png'];\n      var isJPG = types.includes(file.type);\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传图片只能是 JPG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    },\n    httpRequest: function httpRequest(param) {\n      var _this6 = this;\n\n      var fileObj = param.file;\n      var fd = new FormData();\n      fd.append('file', fileObj);\n      fd.append('mid', this.mid);\n      this.$axios({\n        method: 'post',\n        url: '/changeMovieCover',\n        data: fd,\n        header: {\n          'Content-Type': 'multipart/form-data' //如果写成contentType会报错\n\n        }\n      }).then(function (res) {\n        if (res.data.result === false) {\n          _this6.$message.error('修改失败'); //修改失败，重新注册\n\n        } else {\n          _this6.$message({\n            message: '修改封面成功',\n            type: 'warning'\n          });\n        }\n      });\n    },\n    httpRequestSlide: function httpRequestSlide(param) {\n      var _this7 = this;\n\n      var fileObj = param.file;\n      var fd = new FormData();\n      fd.append('file', fileObj);\n      fd.append('mid', this.mid);\n      this.$axios({\n        method: 'post',\n        url: '/changeMovieSlideImg',\n        data: fd,\n        header: {\n          'Content-Type': 'multipart/form-data' //如果写成contentType会报错\n\n        }\n      }).then(function (res) {\n        if (res.data.result === false) {\n          _this7.$message.error('修改失败'); //修改失败，重新注册\n\n        } else {\n          _this7.$message({\n            message: '修改展示Img成功',\n            type: 'warning'\n          });\n        }\n      });\n    },\n    changeMovieTime: function changeMovieTime() {\n      var _this8 = this;\n\n      console.log(this.movieTime);\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieTime',\n        params: {\n          mid: this.mid,\n          mTime: this.movieTime\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this8.$message.success('电影时长修改成功');\n        }\n      });\n    },\n    changeMovieBio: function changeMovieBio() {\n      var _this9 = this;\n\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieBio',\n        params: {\n          mid: this.mid,\n          mBio: this.movieBio\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this9.$message.success('电影简介修改成功');\n        }\n      });\n    },\n    changeMovieRelDate: function changeMovieRelDate() {\n      var _this10 = this;\n\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieRelDate',\n        params: {\n          mid: this.mid,\n          mRelDate: this.movieRelDate\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this10.$message.success('电影上映时间修改成功');\n        }\n      });\n    },\n    changeMovieLang: function changeMovieLang() {\n      var _this11 = this;\n\n      var mLang = this.movieLang[0];\n\n      for (var i = 1; i < this.movieLang.length; i++) {\n        mLang = mLang + '/' + this.movieLang[i];\n      }\n\n      console.log(mLang);\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieLang',\n        params: {\n          mid: this.mid,\n          mLang: mLang\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this11.$message.success('电影语言修改成功');\n        }\n      });\n    },\n    changeMovieRegion: function changeMovieRegion() {\n      var _this12 = this;\n\n      var mRegion = this.movieRegion[0];\n\n      for (var i = 1; i < this.movieRegion.length; i++) {\n        mRegion = mRegion + '/' + this.movieRegion[i];\n      }\n\n      console.log(mRegion);\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieRegion',\n        params: {\n          mid: this.mid,\n          mRegion: mRegion\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this12.$message.success('电影制片地区修改成功');\n        }\n      });\n    },\n    changeMovieType: function changeMovieType() {\n      var _this13 = this;\n\n      var tStr = '';\n\n      if (this.typeList) {\n        tStr = this.typeList[0];\n\n        for (var i = 1; i < this.typeList.length; i++) {\n          tStr = tStr + ',' + this.typeList[i];\n        }\n      }\n\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieType',\n        params: {\n          mid: this.mid,\n          mType: tStr\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this13.$message.success('电影类型修改成功');\n        }\n      });\n    },\n    changeMovieDirector: function changeMovieDirector() {\n      var _this14 = this;\n\n      var dStr = '';\n\n      if (this.directorList) {\n        dStr = this.directorList[0];\n\n        for (var i = 1; i < this.directorList.length; i++) {\n          dStr = dStr + ',' + this.directorList[i];\n        }\n      }\n\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieDirector',\n        params: {\n          mid: this.mid,\n          mDirector: dStr\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this14.$message.success('导演修改成功');\n        }\n      });\n    },\n    changeMovieActor: function changeMovieActor() {\n      var _this15 = this;\n\n      var aStr = '';\n\n      if (this.actorList) {\n        aStr = this.actorList[0];\n\n        for (var i = 1; i < this.actorList.length; i++) {\n          aStr = aStr + ',' + this.actorList[i];\n        }\n      }\n\n      this.$axios({\n        method: \"get\",\n        url: '/changeMovieActor',\n        params: {\n          mid: this.mid,\n          mActor: aStr\n        }\n      }).then(function (res) {\n        if (res.data.result) {\n          _this15.$message.success('演员修改成功');\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.checkId();\n    this.getPerson();\n    this.getMovieInfo();\n  },\n  watch: {\n    movieRelDate: function movieRelDate() {\n      this.changeMovieRelDate();\n    },\n    movieLang: function movieLang() {\n      this.changeMovieLang();\n    },\n    movieRegion: function movieRegion() {\n      this.changeMovieRegion();\n    },\n    typeList: function typeList() {\n      this.changeMovieType();\n    }\n  }\n};",{"version":3,"sources":["modifyMovie.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div class=\"modifyMovie\">\r\n  <el-row>\r\n    <el-col :span=\"10\" :offset=\"3\">\r\n      <h1>修改影片信息</h1>\r\n    </el-col>\r\n  </el-row>\r\n  <el-row style=\"margin-top: 2em\">\r\n    <el-col :span=\"15\" :offset=\"3\">\r\n      <el-form :model=\"movieFrom\" :rules=\"movieFromRules\" ref=\"movieFrom\" label-width=\"100px\">\r\n        <el-form-item label=\"电影名\" prop=\"movieName\">\r\n          <el-input v-model=\"movieName\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电影时长\" prop=\"movieTime\">\r\n          <el-input type=\"number\" v-model=\"movieTime\" @input=\"changeMovieTime\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电影简介\" prop=\"movieBio\">\r\n          <el-input @input=\"changeMovieBio\" type=\"textarea\" :autosize=\"{ minRows: 3, maxRows: 8}\" placeholder=\"请输入简介\" v-model=\"movieBio\" maxlength=\"1000\" show-word-limit >\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"上映日期\">\r\n          <el-date-picker\r\n              v-model=\"movieRelDate\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              format=\"yyyy 年 MM 月 dd 日\"\r\n              value-format=\"yyyy/MM/dd\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"导演\">\r\n          <el-select v-model=\"directorList\"\r\n                     @change=\"changeMovieDirector\"\r\n                     multiple\r\n                     filterable\r\n                     remote\r\n                     reserve-keyword\r\n                     placeholder=\"请输入关键词\"\r\n                     :remote-method=\"selectDirector\"\r\n                     :loading=\"loading\">\r\n            <el-option\r\n                v-for=\"item in directOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"演员\">\r\n          <el-select v-model=\"actorList\"\r\n                     @change=\"changeMovieActor\"\r\n                     multiple\r\n                     filterable\r\n                     remote\r\n                     reserve-keyword\r\n                     placeholder=\"请输入关键词\"\r\n                     :remote-method=\"selectActor\"\r\n                     :loading=\"loading\"\r\n                     style=\"width: 50%;\"\r\n\r\n          >\r\n            <el-option\r\n                v-for=\"item in options\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"电影封面\">\r\n          <el-upload\r\n              class=\"avatar-uploader\"\r\n              action=\"\"\r\n              ref=\"upload\"\r\n              :limit=\"1\"\r\n              :show-file-list=\"true\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n              :http-request=\"httpRequest\"\r\n              :file-list=\"fileList\"\r\n          >\r\n            <el-image :fit=\"'scale-down'\" v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\"></el-image>\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否轮播展示\">\r\n          <el-switch\r\n              style=\"display: block\"\r\n              v-model=\"movieSlide\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              active-text=\"轮播展示\"\r\n              inactive-text=\"非展示\">\r\n          </el-switch>\r\n        </el-form-item>\r\n        <el-form-item label=\"电影展示封面\">\r\n          <el-upload\r\n              class=\"avatar-uploader\"\r\n              action=\"\"\r\n              ref=\"uploadSlideImg\"\r\n              :limit=\"1\"\r\n              :show-file-list=\"true\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n              :http-request=\"httpRequestSlide\"\r\n              :file-list=\"slideFile\"\r\n          >\r\n            <el-image :fit=\"'scale-down'\" v-if=\"slideUrl\" :src=\"slideUrl\" class=\"avatar\"></el-image>\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"语言\">\r\n          <el-checkbox-group v-model=\"movieLang\">\r\n            <el-checkbox label=\"汉语普通话\"></el-checkbox>\r\n            <el-checkbox label=\"汉语粤语\"></el-checkbox>\r\n            <el-checkbox label=\"汉语方言\"></el-checkbox>\r\n            <el-checkbox label=\"英语\" ></el-checkbox>\r\n            <el-checkbox label=\"日语\" ></el-checkbox>\r\n            <el-checkbox label=\"韩语\"></el-checkbox>\r\n            <el-checkbox label=\"德语\"></el-checkbox>\r\n            <el-checkbox label=\"法语\"></el-checkbox>\r\n            <el-checkbox label=\"俄语\" ></el-checkbox>\r\n            <el-checkbox label=\"西班牙语\" ></el-checkbox>\r\n            <el-checkbox label=\"葡萄牙语\"></el-checkbox>\r\n            <el-checkbox label=\"印度语\"></el-checkbox>\r\n            <el-checkbox label=\"其他\"></el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"制片国家/地区\">\r\n          <el-checkbox-group v-model=\"movieRegion\">\r\n            <el-checkbox label=\"中国大陆\"></el-checkbox>\r\n            <el-checkbox label=\"中国香港\"></el-checkbox>\r\n            <el-checkbox label=\"中国台湾\"></el-checkbox>\r\n            <el-checkbox label=\"中国澳门\" ></el-checkbox>\r\n            <el-checkbox label=\"美国\" ></el-checkbox>\r\n            <el-checkbox label=\"日本\"></el-checkbox>\r\n            <el-checkbox label=\"韩国\"></el-checkbox>\r\n            <el-checkbox label=\"印度\"></el-checkbox>\r\n            <el-checkbox label=\"英国\" ></el-checkbox>\r\n            <el-checkbox label=\"德国\" ></el-checkbox>\r\n            <el-checkbox label=\"法国\"></el-checkbox>\r\n            <el-checkbox label=\"俄罗斯\"></el-checkbox>\r\n            <el-checkbox label=\"其他\"></el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影片类型\">\r\n          <el-checkbox-group v-model=\"typeList\">\r\n            <el-checkbox label=\"1\">成人</el-checkbox>\r\n            <el-checkbox label=\"2\">喜剧</el-checkbox>\r\n            <el-checkbox label=\"3\">新闻</el-checkbox>\r\n            <el-checkbox label=\"4\" >真人秀</el-checkbox>\r\n            <el-checkbox label=\"5\" >脱口秀</el-checkbox>\r\n            <el-checkbox label=\"6\">爱情</el-checkbox>\r\n            <el-checkbox label=\"7\">传记</el-checkbox>\r\n            <el-checkbox label=\"8\">动画</el-checkbox>\r\n            <el-checkbox label=\"9\" >动作</el-checkbox>\r\n            <el-checkbox label=\"10\" >短片</el-checkbox>\r\n            <el-checkbox label=\"11\">儿童</el-checkbox>\r\n            <el-checkbox label=\"12\">犯罪</el-checkbox>\r\n            <el-checkbox label=\"13\">歌舞</el-checkbox>\r\n            <el-checkbox label=\"14\">古装</el-checkbox>\r\n            <el-checkbox label=\"15\">鬼怪</el-checkbox>\r\n            <el-checkbox label=\"16\">黑色电影</el-checkbox>\r\n            <el-checkbox label=\"17\" >荒诞</el-checkbox>\r\n            <el-checkbox label=\"18\" >纪录片</el-checkbox>\r\n            <el-checkbox label=\"19\">家庭</el-checkbox>\r\n            <el-checkbox label=\"20\">惊悚</el-checkbox>\r\n            <el-checkbox label=\"21\">剧情</el-checkbox>\r\n            <el-checkbox label=\"22\" >科幻</el-checkbox>\r\n            <el-checkbox label=\"23\" >恐怖</el-checkbox>\r\n            <el-checkbox label=\"24\">历史</el-checkbox>\r\n            <el-checkbox label=\"25\">冒险</el-checkbox>\r\n            <el-checkbox label=\"26\">奇幻</el-checkbox>\r\n            <el-checkbox label=\"27\">情色</el-checkbox>\r\n            <el-checkbox label=\"28\">同性</el-checkbox>\r\n            <el-checkbox label=\"29\">武侠</el-checkbox>\r\n            <el-checkbox label=\"30\" >舞台艺术</el-checkbox>\r\n            <el-checkbox label=\"31\">西部</el-checkbox>\r\n            <el-checkbox label=\"32\">戏曲</el-checkbox>\r\n            <el-checkbox label=\"33\">悬疑</el-checkbox>\r\n            <el-checkbox label=\"34\" >音乐</el-checkbox>\r\n            <el-checkbox label=\"35\" >运动</el-checkbox>\r\n            <el-checkbox label=\"36\">灾难</el-checkbox>\r\n            <el-checkbox label=\"37\">战争</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n        <!--      图片上传-->\r\n      </el-form>\r\n\r\n    </el-col>\r\n    <el-col :span=\"5\" :offset=\"1\">\r\n      <div style=\"margin-top: 18em\">\r\n        <div v-for=\"item in dList\">\r\n          <el-tag type=\"info\">{{item.directorIdOld}}</el-tag>：{{item.personName}}\r\n        </div>\r\n        <div v-for=\"item in aList\">\r\n          <el-tag type=\"info\">{{item.actorIdOld}}</el-tag>：{{item.personName}}\r\n        </div>\r\n      </div>\r\n\r\n    </el-col>\r\n  </el-row>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"modifyMovie\",\r\n  props:{\r\n    mid:{\r\n      type:Number,\r\n      default:0,\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      aList:[],\r\n      dList:[],\r\n      movieFrom:{},\r\n      movieName:'',\r\n      movieCover:'',\r\n      movieSlideImg:'',\r\n      movieBio:'',\r\n      movieRegion:[],\r\n      movieTime:'',\r\n      movieLang:[],\r\n      movieRelDate:'',\r\n      actorList:[],\r\n      directorList:[],\r\n      typeList:[],\r\n      fileList:[],\r\n      slideFile:[],\r\n      options:[],\r\n      directOptions:[],\r\n      list:[],\r\n      imageUrl:'',\r\n      slideUrl:'',\r\n      movieSlide:'',\r\n      loading: false,\r\n      movieFromRules:{\r\n        movieName: [\r\n          {required: true, message: '请输入电影名', trigger: 'blur'},\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods:{\r\n    getMovieInfo(){\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:\"/getMovieByMovieId\",\r\n        params:{\r\n          mid:this.mid,\r\n        }\r\n      }).then(res=>{\r\n        if (res.data.result){\r\n          this.movieName=res.data.movieInfo.movieName;\r\n          this.movieBio=res.data.movieInfo.movieBio;\r\n          if (res.data.movieInfo.movieLang){\r\n            this.movieLang = res.data.movieInfo.movieLang.replaceAll(' ','').split('/');\r\n          }\r\n          if(res.data.movieInfo.movieRegion){\r\n            this.movieRegion = res.data.movieInfo.movieRegion.replaceAll(' ','').split('/');\r\n          }\r\n          this.movieTime=res.data.movieInfo.movieTime;\r\n          this.movieRelDate=res.data.movieInfo.movieRelDate;\r\n          this.movieCover = res.data.movieInfo.movieImg;\r\n          this.movieSlideImg = res.data.movieInfo.movieSlideImg;\r\n          this.imageUrl = \"http://127.0.0.1:8000/media/\" + this.movieCover\r\n          this.slideUrl = \"http://127.0.0.1:8000/media/\" + this.movieSlideImg\r\n          this.actorList = res.data.actorId;\r\n          this.aList=res.data.actor;\r\n          this.dList=res.data.director;\r\n          this.typeList = res.data.typeId;\r\n          this.directorList = res.data.directorId;\r\n          this.imgLoad=true;\r\n        }else{\r\n          this.$message.error('无此电影404');\r\n          this.$router.go(-1);\r\n        }\r\n      })\r\n    },\r\n    checkId() {\r\n      let uid = this.$cookie.get('userId')\r\n      let type = this.$cookie.get('type')\r\n      if (type==1){\r\n        this.$router.go(-1)\r\n      }else{\r\n        this.$axios({\r\n          method:\"get\",\r\n          url:'/getUserById',\r\n          params:{\r\n            userId:uid,\r\n          },\r\n        }).then(res=>{\r\n          if(res.data.result){\r\n            if(res.data.type){\r\n              this.$cookie.remove('userId');\r\n              this.$cookie.remove('type');\r\n              this.$router.push('/log')\r\n              this.$message.error('非管理员用户，请重新登陆')\r\n            }else{\r\n              this.$message.warning('欢迎登录HERec管理员')\r\n            }\r\n          }else{\r\n            this.$cookie.remove('userId');\r\n            this.$cookie.remove('type');\r\n            this.$router.push('/log')\r\n            this.$message.error('非管理员用户，请重新登陆')\r\n          }\r\n        })\r\n      }\r\n    },\r\n    getPerson(){\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/getPerson',\r\n      }).then(res=>{\r\n        this.list = res.data.personList.map(item=>{\r\n          return{\r\n            value:item[0],\r\n            label:item[1],\r\n          }\r\n        })\r\n      })\r\n    },\r\n    selectActor(query) {\r\n      if (query !== '') {\r\n        this.loading = true;\r\n        setTimeout(() => {\r\n          this.loading = false;\r\n          this.options = this.list.filter(item => {\r\n            return item.label.toLowerCase()\r\n                .indexOf(query.toLowerCase()) > -1;\r\n          });\r\n        }, 200);\r\n      } else {\r\n        this.options = [];\r\n      }\r\n    },\r\n    selectDirector(query) {\r\n      if (query !== '') {\r\n        this.loading = true;\r\n        setTimeout(() => {\r\n          this.loading = false;\r\n          this.directOptions = this.list.filter(item => {\r\n            return item.label.toLowerCase()\r\n                .indexOf(query.toLowerCase()) > -1;\r\n          });\r\n        }, 200);\r\n      } else {\r\n        this.directOptions = [];\r\n      }\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      let types = ['image/jpeg', 'image/jpg', 'image/png'];\r\n      const isJPG = types.includes(file.type);\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传图片只能是 JPG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    httpRequest(param){\r\n      let fileObj = param.file\r\n      let fd = new FormData()\r\n      fd.append('file',fileObj)\r\n      fd.append('mid', this.mid)\r\n      this.$axios({\r\n            method: 'post',\r\n            url: '/changeMovieCover',\r\n            data: fd,\r\n            header: {\r\n              'Content-Type': 'multipart/form-data'  //如果写成contentType会报错\r\n            }\r\n          }\r\n      ).then(res => {\r\n        if (res.data.result === false) {\r\n          this.$message.error('修改失败');\r\n          //修改失败，重新注册\r\n        } else {\r\n          this.$message({\r\n            message: '修改封面成功',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      })\r\n    },\r\n    httpRequestSlide(param){\r\n      let fileObj = param.file\r\n      let fd = new FormData()\r\n      fd.append('file',fileObj)\r\n      fd.append('mid', this.mid)\r\n      this.$axios({\r\n            method: 'post',\r\n            url: '/changeMovieSlideImg',\r\n            data: fd,\r\n            header: {\r\n              'Content-Type': 'multipart/form-data'  //如果写成contentType会报错\r\n            }\r\n          }\r\n      ).then(res => {\r\n        if (res.data.result === false) {\r\n          this.$message.error('修改失败');\r\n          //修改失败，重新注册\r\n        } else {\r\n          this.$message({\r\n            message: '修改展示Img成功',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n\r\n    changeMovieTime(){\r\n      console.log(this.movieTime)\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieTime',\r\n        params:{\r\n          mid:this.mid,\r\n          mTime:this.movieTime,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('电影时长修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieBio(){\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieBio',\r\n        params:{\r\n          mid:this.mid,\r\n          mBio:this.movieBio,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('电影简介修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieRelDate(){\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieRelDate',\r\n        params:{\r\n          mid:this.mid,\r\n          mRelDate:this.movieRelDate,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('电影上映时间修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieLang(){\r\n      let mLang=this.movieLang[0]\r\n      for (let i=1;i<this.movieLang.length;i++) {\r\n        mLang = mLang+'/'+ this.movieLang[i]\r\n      }\r\n      console.log(mLang)\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieLang',\r\n        params:{\r\n          mid:this.mid,\r\n          mLang:mLang,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('电影语言修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieRegion(){\r\n      let mRegion=this.movieRegion[0]\r\n      for (let i=1;i<this.movieRegion.length;i++) {\r\n        mRegion = mRegion+'/'+ this.movieRegion[i]\r\n      }\r\n      console.log(mRegion)\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieRegion',\r\n        params:{\r\n          mid:this.mid,\r\n          mRegion:mRegion,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('电影制片地区修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieType(){\r\n      let tStr=''\r\n      if(this.typeList){\r\n        tStr=this.typeList[0]\r\n        for (let i=1;i<this.typeList.length;i++){\r\n          tStr=tStr+','+this.typeList[i]\r\n        }\r\n      }\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieType',\r\n        params:{\r\n          mid:this.mid,\r\n          mType:tStr,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('电影类型修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieDirector(){\r\n      let dStr=''\r\n      if(this.directorList){\r\n        dStr=this.directorList[0]\r\n        for (let i=1;i<this.directorList.length;i++){\r\n          dStr=dStr+','+this.directorList[i]\r\n        }\r\n      }\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieDirector',\r\n        params:{\r\n          mid:this.mid,\r\n          mDirector:dStr,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('导演修改成功')\r\n        }\r\n      })\r\n    },\r\n    changeMovieActor(){\r\n      let aStr=''\r\n      if(this.actorList){\r\n        aStr=this.actorList[0]\r\n        for (let i=1;i<this.actorList.length;i++){\r\n          aStr=aStr+','+this.actorList[i]\r\n        }\r\n      }\r\n      this.$axios({\r\n        method:\"get\",\r\n        url:'/changeMovieActor',\r\n        params:{\r\n          mid:this.mid,\r\n          mActor:aStr,\r\n        }\r\n      }).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success('演员修改成功')\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n\r\n\r\n  },\r\n  created() {\r\n    this.checkId()\r\n    this.getPerson()\r\n    this.getMovieInfo()\r\n  },\r\n  watch:{\r\n    movieRelDate:function (){\r\n      this.changeMovieRelDate()\r\n    },\r\n    movieLang:function (){\r\n      this.changeMovieLang()\r\n    },\r\n    movieRegion:function (){\r\n      this.changeMovieRegion()\r\n    },\r\n    typeList:function (){\r\n      this.changeMovieType()\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/pages"}]}